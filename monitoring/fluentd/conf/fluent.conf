<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

# 기존 설정
<match api.**>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix api-logs
  include_tag_key true
  type_name access_log
  tag_key @log_name
  flush_interval 1s

  <buffer>
    @type memory
    chunk_limit_size 2M
    queue_limit_length 32
    flush_interval 1s
    retry_max_interval 30
    retry_forever false
  </buffer>
</match>

# mywarehome 로그를 위한 새로운 설정 추가
<match mywarehome.**>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix mywarehome-logs
  include_tag_key true
  type_name application_log
  tag_key @log_name

  <buffer>
    @type memory
    chunk_limit_size 2M
    queue_limit_length 32
    flush_interval 1s
    retry_max_interval 30
    retry_forever false
  </buffer>
</match>

# 나머지 애플리케이션 로그
<match app.**>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix app-logs
  include_tag_key true
  type_name application_log
  tag_key @log_name

  <buffer>
    @type memory
    chunk_limit_size 2M
    queue_limit_length 32
    flush_interval 1s
    retry_max_interval 30
    retry_forever false
  </buffer>
</match>